{% extends 'admin/home.html' %}

<div id="preloader">
    <div id="status">
        <div class="spinner"></div>
    </div>
</div>
{% load static %}
{% block A %}



<!-- start page title -->
        <div class="row">
            <div class="col-12">
                <div class="page-title-box">
                    <div class="page-title-right">
                        <ol class="breadcrumb m-0">
                            <li class="breadcrumb-item"><a href="javascript: void(0);">Home</a></li>
                            <li class="breadcrumb-item"><a href="javascript: void(0);">Student Registered</a></li>
                        </ol>
                    </div>
                    <h4 class="page-title">Registered Students Details</h4>
                </div>
            </div>
        </div>
        <!-- end page title -->

<div class="row">


    <div class="col-sm-12">
        <div class="card-box" >

            <h4 class="header-title">Registered Student </h4>


<!--            <button id="demo-delete-row" class="btn btn-danger btn-sm" disabled><i class="mdi mdi-close mr-1"></i>Delete</button>-->
            <table id="demo-custom-toolbar" data-toggle="table"
                   data-toolbar="#demo-delete-row"
                   data-search="true"
                   data-show-refresh="true"
                   data-show-columns="true"
                   data-sort-name="id"
                   data-page-list="[5, 10, 20]"
                   data-page-size="5"
                   data-pagination="true" data-show-pagination-switch="true" class="table-borderless">
                <thead class="thead-light">
                <tr>
                    <th data-field="cr_user" data-sortable="true"> + User</th>
                    <th data-field="batch" data-sortable="true">Batch</th>
                    <th data-field="name" data-sortable="true">Name</th>
<!--                    <th data-field="photo" data-sortable="true">photo</th>-->
                    <th data-field="number" data-sortable="true">Contact No.</th>
                    <th data-field="email" data-sortable="true">Email</th>
<!--                    <th data-field="ref name" data-sortable="true">Reffernce Name</th>-->
                    <th data-field="date1" data-sortable="true">Date</th>
<!--                    <th data-field="inst" data-sortable="true">Institute</th>-->
<!--                    <th data-field="sem" data-sortable="true">Sem</th>-->
<!--                    <th data-field="stream" data-sortable="true">Stream</th>-->
                    <th data-field="Structure" data-sortable="true">Structure</th>
                    <th data-field="language" data-sortable="true">Language</th>
                    <th data-field="training types" data-sortable="true">Training Type</th>
                    <th data-field="Price" data-sortable="true">Price</th>
                    <th data-field="installment" data-sortable="true">installment</th>
                    <th data-field="Remaining ins" data-sortable="true" > Remaining Installment</th>
<!--                    <th data-field="acceptfee" >Accept Fees </th>-->
<!--                    <th data-field="asms" >Next Paydate </th>-->


                    <th data-field="status" data-align="center" data-sortable="true" data-formatter="">Status</th>
<!--                    <th data-field="rec">Receipt</th>-->
<!--                    <th>Certificates</th>-->
                    <th data-field="sendmessage">SMS Registered</th>
                    <th data-field="admintcard">Admit Card </th>
<!--                    <th data-field="state">Delete</th>-->
                    <th data-field="action">Action</th>




                </tr>
                </thead>

                <tbody>
                {% for s in result %}
                <tr>
                    <td><button name="cr_us" class="btn btn-dark" onclick="sd('{{s.id}}')"><i class="fa fa-user-plus" aria-hidden="true"></i></button></td>
                    <td><center>{{ s.batch.batch }}</center></td>
                    <td><center>{{ s.fullname }} </center></td>
<!--                    <td><img src="/media/{{s.inq.studentphoto }}" class="rounded-circle avatar-sm" alt=""></td>-->
                    <td><center>{{ s.pnum }}</center></td>
                    <td><center>{{ s.email }}</center></td>
<!--                    <td><center>{{ s.reffname }}</center></td>-->
                    <td><center>{{ s.date1 }}</center></td>
<!--                    <td><center>{{ s.Institute }}</center></td>-->
<!--                    <td><center>{{ s.Semester }}</center></td>-->
<!--                    <td><center>{{ s.Stream }}</center></td>-->
                    <td><center>{{ s.structurename.structurename}}</center></td>
                    <td><center>{{ s.lang.lang }} <img src=" /media/{{s.lang.langimg }}" class="rounded-circle avatar-sm" alt="languageimg"></center></td>
                    <td><center>{{ s.TrainigTyped.TrainigTyped }}</center></td>
                    <td><center>{{s.price.price}}</center></td>
                    <td><center>{{s.installment}}</center></td>
                    <td ><center><button  name="acffee"  class="btn btn-info"  onclick="dec('{{s.id}}')">{{s.remaining_installment}}</button></center></td>
<!--                    <td><button name="acffee" class="btn btn-success"  onclick="dec('{{s.id}}')"> - </button></td>-->
<!--                    <td><center><button name="nextdate" class="btn btn-warning"  onclick="Send_Message12('{{s.id}}')">NextDate</button></center></td>-->

                    <td><button  type="button" name="registered" class="btn btn-success btn-xs waves-effect mb-2 waves-light " onclick="closee('{{s.id}}')">Registered</button></td>
<!--                    {% if s.remaining_installment == 0 %}-->
<!--                    <td><button name="rec" class="btn btn-dark" onclick="root('{{s.id}}')">Receipt</button></td>-->
<!--                    {% else %}-->
<!--                    <td><button name="rec" class="btn btn-dark" onclick="root('{{s.id}}')"disabled>Receipt</button></td>-->
<!--                   {% endif %}-->
<!--                    <td><button type="button" onclick="certi('{{s.id}}')"  class="btn bg-success btn-xs waves-effect mb-2 waves-light">Certificates</button></td>-->

                    <td><button type="button" onclick="Send_Message('{{s.id}}')" class="btn btn-danger btn-xs waves-effect mb-2 waves-light">Msg with Uid </button></td>

                    <td><button class="btn btn-primary"  onclick="admitcard('{{s.id}}','{{s.fullname}}','{{ s.pnum }}','{{ s.email }}','{{ s.reffname }}','{{ s.date1 }}','{{ s.lang.lang }}')" ><i class="fas fa-id-card"></i></button></td>
<!--                    <td><button class="btn btn-danger  btn-xs btn-icon"  name="delete" onclick="badboy('{{s.id}}')"><i class="fa fa-times"></i></button></td>-->
                    <td>

                        <div class="btn-group dropleft">
                            <a href="javascript: void(0);" class="table-action-btn dropdown-toggle arrow-none btn btn-secondary btn-sm" data-toggle="dropdown" aria-expanded="false"><i class="fas fa-quidditch"></i></a>
                            <div class="dropdown-menu drop-left">

<!--                                <a class="dropdown-item "><button name="nextdate" class="btn btn-warning btn-xs waves-effect mb-2 waves-light" onclick="Send_Message12('{{s.id}}')">Send Pay NextDate</button></a>-->
<!--                                <a class="dropdown-item "><button type="button" onclick="Send_Message('{{s.id}}')" class="btn btn-danger btn-xs waves-effect mb-2 waves-light">Msg with Userid</button></a>-->
<!--                                <a class="dropdown-item"><button name="registered" class="btn btn-danger btn-xs waves-effect mb-2 waves-light" onclick="closee('{{s.id}}')">Status:Registered</button></a>-->
                                <a class="dropdown-item">{% if s.remaining_installment == 0 %}<button name="rec" class="btn btn-dark btn-xs waves-effect  waves-light " onclick="root('{{s.id}}')">Receipt</button>{% else %}<button name="rec" class="btn btn-dark btn-xs waves-effect waves-light" onclick="root('{{s.id}}')" disabled>Receipt</button>{% endif %}</a>
                                <a class="dropdown-item"><button type="button" onclick="certi('{{s.id}}')" class="btn bg-success btn-xs waves-effect waves-light">Certificates</button></a>
                                <a class="dropdown-item"> <button class="btn btn-danger  btn-xs btn-icon"  name="delete" onclick="badboy('{{s.id}}')"><i class="fa fa-times"></i> Remove</button></a>

                            </div>
                        </div>

                    </td>

                </tr>
                 {%endfor%}
                </tbody>
            </table>
        </div> <!-- end card-box-->
    </div> <!-- end col-->
</div>
<!-- end row-->





<script>
    function certi(id)
    {
        $('[name="cid"]').val(id);
        $('#myModal').modal('show');
    }
</script>



<script src="{% static 'js/jquery-3.5.1.min.js'%}"></script>


<!--// registered data ne message send karva ke inquiry tamari registred thai gai che-->
<script>
function Send_Message(id)
{
   window.location.href="/sendmessagefor_registered/?id="+id;
}
</script>

<script>

</script>

<script>
function badboy(id)

{
   window.location.href="/regidelete/?id="+id;
}
</script>


<script>
function Send_Message12(id)
{
  window.location.href="/sendmessagefor_registered12345/?id="+id;
 }
</script>

<script>
function dec(id)
{
   window.location.href="/decree/?id="+id;

}
</script>




<script>
    function sd(id)
{
Swal.fire({
  title: 'Are you sure?',
  text: 'You will not be able to recover this imaginary file!',
  icon: 'warning',
  showCancelButton: true,
  confirmButtonText: 'Yes, delete it!',
  cancelButtonText: 'No, keep it'
}).then((result) => {
  if (result.value) {
   window.location.href="/cr_user/?id="+id;


  } else if (result.dismiss === Swal.DismissReason.cancel) {
    Swal.fire(
      'Cancelled',
      'Your imaginary file is safe :)',
      'error'
    )
  }
})
}
</script>

<script>
function closee(id)
{
Swal.fire({
  title: 'Are you sure?',
  text: ' Completed course or Closed Students !',
  icon: 'warning',
  showCancelButton: true,
  confirmButtonText: 'Yes, Closed it!',
  cancelButtonText: 'No, keep it'
}).then((result) => {
  if (result.value) {
   window.location.href="/clos/?id="+id;

  } else if (result.dismiss === Swal.DismissReason.cancel) {
    Swal.fire(
      'Cancelled',
      'Your imaginary file is safe :)',
      'error'
    )
  }
})
}
</script>





<!--//receipt mate-->
<script>
function root(id)
{
Swal.fire({
  title: 'Are you sure?',
  text: 'You will  be Generate Your Receipt!',
  icon: 'warning',
  showCancelButton: true,
  confirmButtonText: 'Yes, Generate it!',
  cancelButtonText: 'No'
}).then((result) => {
  if (result.value) {
   window.location.href="/rec_getdata/?id="+id;

  } else if (result.dismiss === Swal.DismissReason.cancel) {
    Swal.fire(
      'Cancelled',
      'Your imaginary file is safe :)',
      'error'
    )
  }
})
}
</script>
<script>
    function prints(){
        window.print();
    }
</script>


<!--=======admit card ------------>
<script>
    function admitcard(id,fullname,pnum,email,reffname,date1,lang)
    {
         $('[name="inqid"]').val(id);
         document.getElementById("fullname").innerHTML = fullname;
         $('[name="fullname"]').val(fullname);
         $('[name="pnum"]').val(pnum);
         $('[name="email"]').val(email);
         $('[name="reffname"]').val(reffname);
         $('[name="date1"]').val(date1);
         $('[name="lang"]').val(lang);
        $('#full-width-modal').modal('show');

    }
</script>
<!--------admit card ------------->

    <div id="full-width-modal"  class="modal fade " tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <h4 class="modal-title">Admit Card</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                </div>
                <div class="modal-body p-4">
                    <input type="hidden" name="inqid" id="inqid">
                    <button type="" onclick="prints()" class="btn btn-primary waves-effect waves-light"><i class="mdi mdi-printer mr-1"></i> Print</button>
                    <div class="card-box text-center">
                            <img src="{% static 'images/admit.png'%}" class="rounded-circle avatar-lg img-thumbnail" alt="profile-image">

                            <h2 class="mb-0" id="fullname"> </h2><br>
                            <button name="registered" class="btn btn-danger" onclick="closee('{{s.id}}')">Registered</button>

<!--                            <button type="button" onclick="Send_Message('{{s.id}}')" class="btn btn-danger btn-xs waves-effect mb-2 waves-light">Send Message</button>-->

                            <div class="text-left mt-5">
                                <p class="text-muted mb-2 font-13"><strong>Full Name :<input class="form-control" name="fullname"></strong> <span class="ml-2" ></span></p>
                                <p class="text-muted mb-2 font-13"><strong>Mobile :<input class="form-control" name="pnum"></strong><span class="ml-2"></span></p>
                                <p class="text-muted mb-2 font-13"><strong>Email :<input class="form-control" name="email"></strong> <span class="ml-2 "></span></p>
                                <p class="text-muted mb-1 font-13"><strong>Language :<input class="form-control" name="lang"></strong> </p>
                            </div>



                        </div> <!-- end card-box -->


                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary waves-effect" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>


    </div><!-- /.modal -->


<!--====================================================================================
-----------------------------------MODEL CONTENT END-----------------------------------
=====================================================================================-->
<script>
    function abc(id)
    {
        window.location.href = "/Internship_Certificate1/?cid="+id;

    }
</script>
<script>
    function abc1(id)
    {
         window.location.href = "/Experience_Certificate1/?cid="+id;
    }
</script>
<script>
    function abc2(id)
    {
         window.location.href = "/Offer_letter_Certificate1/?cid="+id;
    }
</script>
<script>
    function abc3(id)
    {
        window.location.href = "/Leave_for_Internship1/?cid="+id;

    }
</script>

<!-----------------------------------cetifciate model----------------------------->
<div class="modal fade" id="myModal">

    <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Take Your Certificates</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>


      <!-- Modal body -->
      <div class="modal-body">
          <input type="hidden" id="cid" name="cid">
          <a onclick="abc(this.value)" name = "cid" ><button  class="btn btn-success btn-xs waves-effect waves-light" ><i class="mdi mdi-pencil"></i><b> Internship Certificate</b></button></a><br><br>
          <a onclick="abc1(this.value)" name = "cid" ><button  class="btn btn-success btn-xs waves-effect waves-light" ><i class="mdi mdi-pencil"></i><b> Experience Certificate</b></button></a><br><br>
          <a onclick="abc2(this.value)" name = "cid" ><button  class="btn btn-success btn-xs waves-effect waves-light" ><i class="mdi mdi-pencil"></i><b> Offer_letter Certificate</b></button></a><br><br>
          <a onclick="abc3(this.value)" name = "cid"><button  class="btn btn-success btn-xs waves-effect waves-light" ><i class="mdi mdi-pencil"></i><b> Leave Internship Certificate</b></button></a><br><br>

      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>

<!---------------------------------certificate end --------------------------------->









{% endblock %}